(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1285:function(t,e,n){var content=n(1292);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(65).default)("5c33164c",content,!0,{sourceMap:!1})},1290:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return o}));var r=n(30),c=(n(129),n(24),n(34),n(35),n(161),function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(1),n.e(2)]).then(n.bind(null,1274));case 2:return e=t.sent.default,t.prev=3,t.next=6,e.post("https://large-lovely-woodcock.ngrok-free.app/trashcan/");case 6:return r=t.sent,t.abrupt("return",r.data);case 10:return t.prev=10,t.t0=t.catch(3),t.abrupt("return",{trashcan:[{General:{qrcode:"QR-123456",tcapacity:"44",tid:14},Recycle:{qrcode:"QR-123456",tcapacity:"100",tid:1},lat:24.1787,lng:120.6429,region:"西屯區",tname:"台中科技大學",isLike:!0,street:"文華路100號",maxTcapacity:"100"},{General:{qrcode:"QR-123456",tcapacity:"35",tid:14},Recycle:{qrcode:"QR-123456",tcapacity:"85",tid:1},lat:24.1801,lng:120.6472,region:"西屯區",tname:"台中科技大學",isLike:!1,street:"僑光路100號",maxTcapacity:"85"},{General:{qrcode:"QR-123456",tcapacity:"1",tid:14},Recycle:{qrcode:"QR-123456",tcapacity:"22",tid:1},lat:24.1769,lng:120.6518,region:"西屯區",tname:"台中科技大學",isLike:!1,street:"台灣大道四段1727號",maxTcapacity:"22"},{General:{qrcode:"QR-123456",tcapacity:"74",tid:14},Recycle:{qrcode:"QR-123456",tcapacity:"96",tid:1},lat:24.1743,lng:120.6397,region:"西屯區",tname:"台中科技大學",isLike:!1,street:"僑光路10號",maxTcapacity:"96"},{General:{qrcode:"QR-123456",tcapacity:"85",tid:14},Recycle:{qrcode:"QR-123456",tcapacity:"100",tid:1},lat:24.1267,lng:120.6633,region:"南區",tname:"台中科技大學",isLike:!0,street:"建國北路一段110號",maxTcapacity:"100"},{General:{qrcode:"QR-123456",tcapacity:"16",tid:14},Recycle:{qrcode:"QR-123456",tcapacity:"63",tid:1},lat:24.1248,lng:120.6654,region:"南區",tname:"台中科技大學",isLike:!1,street:"興大路145號",maxTcapacity:"63"},{General:{qrcode:"QR-123456",tcapacity:"86",tid:14},Recycle:{qrcode:"QR-123456",tcapacity:"53",tid:1},lat:24.2315,lng:120.5634,region:"沙鹿區",tname:"台中科技大學",isLike:!1,street:"台灣大道六段1018號",maxTcapacity:"86"},{General:{qrcode:"QR-123456",tcapacity:"100",tid:14},Recycle:{qrcode:"QR-123456",tcapacity:"100",tid:1},lat:24.2298,lng:120.5732,region:"沙鹿區",tname:"台中科技大學",isLike:!1,street:"台灣大道七段200號",maxTcapacity:"100"},{General:{qrcode:"QR-123456",tcapacity:"100",tid:14},Recycle:{qrcode:"QR-123456",tcapacity:"75",tid:1},lat:24.2281,lng:120.5699,region:"沙鹿區",tname:"台中科技大學",isLike:!1,street:"台灣大道六段108號",maxTcapacity:"100"},{General:{qrcode:"QR-123456",tcapacity:"45",tid:14},Recycle:{qrcode:"QR-123456",tcapacity:"10",tid:1},lat:24.1623,lng:120.6855,region:"北區",tname:"台中科技大學",isLike:!0,street:"三民路三段129號",maxTcapacity:"45"},{General:{qrcode:"QR-123456",tcapacity:"100",tid:14},Recycle:{qrcode:"QR-123456",tcapacity:"24",tid:1},lat:24.1651,lng:120.6784,region:"北區",tname:"台中科技大學",isLike:!0,street:"雙十路一段16號",maxTcapacity:"100"},{General:{qrcode:"QR-123456",tcapacity:"100",tid:14},Recycle:{qrcode:"QR-123456",tcapacity:"75",tid:1},lat:24.1637,lng:120.6827,region:"北區",tname:"台中科技大學",isLike:!1,street:"三民路三段12號",maxTcapacity:"100"},{General:{qrcode:"QR-123456",tcapacity:"22",tid:14},Recycle:{qrcode:"QR-123456",tcapacity:"93",tid:1},lat:24.0421,lng:120.6983,region:"霧峰區",tname:"台中科技大學",isLike:!0,street:"柳豐路500號",maxTcapacity:"93"}]});case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(){return t.apply(this,arguments)}}()),o=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e,r){var c,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(1),n.e(2)]).then(n.bind(null,1274));case 2:return c=t.sent.default,t.prev=3,t.next=6,c.post("https://large-lovely-woodcock.ngrok-free.app/insertfavorite/?uid=".concat(e,"&tname=").concat(r));case 6:return o=t.sent,t.abrupt("return",o);case 10:t.prev=10,t.t0=t.catch(3);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,n){return t.apply(this,arguments)}}()},1291:function(t,e,n){"use strict";n(1285)},1292:function(t,e,n){var r=n(64)((function(i){return i[1]}));r.push([t.i,"#GarbageModal .title[data-v-ba7985c6]{font-weight:800}#GarbageModal .trash-flex[data-v-ba7985c6]{display:flex;font-size:12px;font-weight:800;gap:14px;justify-content:center;margin-bottom:5px}#GarbageModal .trash-flex .trash-area[data-v-ba7985c6]{display:flex;flex-direction:column}#GarbageModal .trashIcon[data-v-ba7985c6]{font-size:25px}#GarbageModal .map-link[data-v-ba7985c6]{color:#1a73e8;padding-left:20px;text-align:center}",""]),r.locals={},t.exports=r},1301:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAtCAYAAAA3BJLdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGzSURBVHgB7ZnBUcMwEEW/k9wJR89wIB1QApRAB1ABlEAJlEIqgBLoAHGCG86NA1issDPjyGtrDZa98eTNZJJoFOfNer1eyQmEvAM39HZlgTP0xxO9rlPASCYnkklOlCTvEYfsG7g4AZ5DE2cQQKK3iMdyXpy1IEHZN+AUxWtLhv45l0xaoDsZ5dgx/kEZgBd0RJQGWjjIxiIpy9IdfV5CL4bK22VCyf4B3aK/UEDXLg3Uizro7nW0Xzlb/fLX+hcJQ/V8VR2YTukSdTk9YVH779ptfUfWb9X8AwyJDclqh5ON0VUF8VOOIrvx56iR9UmKm9UOatJAcn3UZBMlkc2BV3+sJmuVyHJwshuMQOc6W/4oaztILPxqkE+uzloldXbObHyorQYcwTQYK2c5ZsyAaZ0QCSYoxh+Y1lJ8rDbxU1K6vrzwD9mAV1lNrs4uhBu7kTHc4GGvqyuSJsZRk00VpIGVymqmSXbQNlGyWHSIZIeutdxi0SF6ppAjrrCLmOTssbLuarTewWLii3KLxUYP2mVeY0RI/oEbbzy7tP35COHzqb5JG7xaU5GE7ZBd11amSfYHwnBgZixOUB4AAAAASUVORK5CYII="},1302:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAtCAYAAAA3BJLdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAI6SURBVHgB7ZlLTiMxEIbrb3pG2U1mB5pN5gYEiQU7uAGcAG6AOACiIRfgBlwBTgAXgHADmhXsaFa8ki5sgRAuO4mb9MNBfAskG8f9p1xVruqAPOn1F9bBtM1EHSqJiOny5Zl3kpXb1Gc9fBYdnM9vRcARVUM2eOKuj+CIPACwR9XR/vWbvPafKDbpz3dgHD0yKpkcWPVZF1NhOFXHtkFTMBdTB3M4pYIUFqsCrO0bEKNQp0UxU2G8fDYUZkosev1/m8R5MnaRyK3qBFOa9sEF9sRbettA72LhCiUm+go5iWZEqIL/zJTPxgM8/KXHVlsPXPmPv5BivgI+/rw/V/nw8InXPiZaj5lRG+jbKmZcUQNom8Acp7tLN/8/rwnGDSBOUGcAucYQm3Snu5nKhceLDR2HWLOqqivA2KqscS9nLLHsMH8TgPlOzgUbYC4ssTIKvfqeEmAy1eZE13KNy7JBuIELW2xO99QIECNMTl0cmQHGdfkBpBsEnGfhYRVbLJvmR015VkYycrsYd1hWuAHVpXYys33dyl6oqW8zHHi5QbhMFMuoK3cJVGcgp+zr1orCZgIs6WbfrJ4dxtKy1bsB2+PUte7nXVdRfJpFjSU2jKaR/cSGzAixspasO33BWVM7xcqmkSsuauX2rmZR4/WaXu9VrW39nhCP+GgmJyq2rTFyNYsatxswn1CT5HTmmnaKHUatQ2XKS2oAZaj93eXbM9f/xp6u/hlUdZmLkXrrTBWT6wyQ8/EooZpXqNq56hdONQwAAAAASUVORK5CYII="},1309:function(t,e,n){"use strict";var r=n(45),c=(n(98),n(161),{name:"GarbageModal",props:{general:{type:Object,default:null},recycle:{type:Object,default:null},lat:{type:Number,default:null},lng:{type:Number,default:null},tname:{type:String,default:null}},data:function(){return{}},computed:{trashColor:function(){return function(t){return t<50?"#84ce19":t<75?"#ece200":t<=90?"#e70000":t<=100?"#a005d7":"#000000"}}},methods:{toGoogleMap:function(){console.log(Object(r.a)(this.lat),this.lng),window.open("https://www.google.com/maps/dir/?api=1&destination=".concat(this.lat,",").concat(this.lng),"_blank")}}}),o=(n(1291),n(28)),component=Object(o.a)(c,(function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"GarbageModal"}},[e("p",[t._v(t._s(t.tname))]),e("div",{staticClass:"trash-flex"},[e("div",{staticClass:"trash-area"},[e("p",[t._v(t._s("一般垃圾"))]),e("aIcon",{staticClass:"trashIcon",style:{color:t.trashColor(t.general.tcapacity)},attrs:{type:"delete",theme:"filled"}})],1),e("div",{staticClass:"trash-area"},[e("p",[t._v(t._s("回收垃圾"))]),e("aIcon",{staticClass:"trashIcon",style:{color:t.trashColor(t.recycle.tcapacity)},attrs:{type:"delete",theme:"filled"}})],1)]),e("a",{staticClass:"map-link",on:{click:t.toGoogleMap}},[t._v(t._s("在Google 地圖上查看"))])])}),[],!1,null,"ba7985c6",null);e.a=component.exports},1331:function(t,e,n){t.exports=n.p+"img/connect.a3a25e3.png"},1332:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAtCAYAAAA3BJLdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAG/SURBVHgB7ZlBTsJAFIb/KZCwExJdsDH0BnoDPYlyAr2B8QbewCvICfQI3ICKCxOjocYNCcyMbwwu6Ax1sJ30teFLGmAyNH8m//s7ryPgydsMlxFwQV9P6OqhOCldk2UHo8EAic8fhM+ktdB7hCElwac+giN4QJNuEI5eR/rd/0+xr1MM6WOIkCic+UxrY3eSw2PEKIBZgE4LU+yIlw24sBcbCvHxgisy+HXeJC02C0xov1ws8Z6pVBiJ9xnmKCfkg6I1xsYG7IUahMBBrTzb/pLod9erS6E7FC08ggfJUuL898eCfLuxN/hvWAfCeviwtQEVVJod2xA7iItHUllQQeWL5Y5LbAoGkA0+s2OWWKF5iKVUmmfHam6DiIkNJJ6zY5ZYzcQGLmyxsI1dBRoe0cVmZRuXsxGTnBXSfpq6PFufAuOM/QQTPDYzq66HDTjDVmx34ZOzkocN+nHTcnYFFiubuAb3BVaUbfsTSyyHptHVLBoaYYNK9weuZtHgFFt10+hqFg0NsEHFTaOrWTQ4xSqFMapE4ck17BTbVrgj305QAVRct0exW2zucejPMaims1p664zQUAJohYdtQg3focmDedF7tAYAAAAASUVORK5CYII="},1333:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAtCAYAAAA3BJLdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHeSURBVHgB7ZnNccIwEIV3jZnhFkqAI5ND0kI6SDrAFSSpIE4l4BLSAemAE+QWpwLIjRmCNxKneCXjJSBLMHwnRqxnnqWnpx8jCMnaH48E9KR+9uB4TAiK52R9PZUUo6Qoi+cvhJCCE3BJsLmTCI5AgBI6BGdQFxBTSWWt2FFn3oPjDr0BEt5I6mLYn3y4HvThAHQH4AY+YU9ENgiFi1hX4DY/qUjVjOxCuOQqjx9w3J4tlOaQhW4hpLfoFIRqVLxdKbG0hBOhtNz+N/8cYeT5OUWXaJ/jCDTsWRKbrAZ5+W8Cf9BusaFjEespHdggqlz95iUWsRhElCG1FrwtGBsQm8vq9BBwz/K5TCiZYOGuaIZYImbsptKLRzpKogvDmGBQYMA5S/VDGFkeKr1RYy5A5gOEnNcEm7M26m2AvmaYicUG5e7HxmzNOiUW2SBcasUSFuCFVUeSs8wG5GcDnkD/3PazFmN7ILc1Xu66Dse+MBlizUOjD0gmNmQqxPI3cxxfgsOipkIs90yz9we2w6JG9E2BtFiHiwNGKNrPVonN4c8XGtQ2cOkEJlRdbn/ZyqKKZ9/BJzGMbc1WscnPIFVDn4EHlNteq+Jz5+COWrN7dd64hSbQp1nCqeqoSVXJL6H7nPTOnkxoAAAAAElFTkSuQmCC"},1376:function(t,e,n){var content=n(1475);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(65).default)("a839abe6",content,!0,{sourceMap:!1})},1472:function(t,e,n){t.exports=n.p+"img/delete.2485eb7.png"},1473:function(t,e,n){t.exports=n.p+"img/masculine-user.2f8a095.png"},1474:function(t,e,n){"use strict";n(1376)},1475:function(t,e,n){var r=n(64)((function(i){return i[1]}));r.push([t.i,".google-map[data-v-ba6129b4]{height:90vh;width:100%}.img-mask[data-v-ba6129b4]{align-content:center;align-items:center;background-color:#343f3b;display:flex;flex-direction:row;flex-wrap:wrap;height:90vh;justify-content:center}.img-mask .img-text[data-v-ba6129b4]{color:#fff;font-size:22px}.img-mask .img-text-big[data-v-ba6129b4]{color:#fff;font-size:30px}.img-mask img[data-v-ba6129b4]{height:auto;width:100%}",""]),r.locals={},t.exports=r},1539:function(t,e,n){"use strict";n.r(e);var r=n(30),c=(n(129),n(24),n(34),n(35),n(46),n(88),n(1472),n(1290)),o=n(9),l=n(1309),A={name:"MapIndex",components:{GarbageModal:function(){return n.e(8).then(n.bind(null,1543))},Loading:function(){return n.e(3).then(n.bind(null,1545))}},data:function(){return{loadingVisible:!1,isNoMap:!1,marker:{position:{lat:10,lng:10}},visible:!1,map:null,currentLocation:{lat:null,lng:null},trashcanList:[],trashcan:[]}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingVisible=!0,e.next=3,t.getCurrentLocation();case 3:return e.next=5,t.Init();case 5:t.loadingVisible=!1,t.initMap(),r=n(1473),new google.maps.Marker({position:t.currentLocation,map:t.map,icon:{url:r,scaledSize:new google.maps.Size(50,50)}}),t.fetchtrashcan(),t.setMarker();case 11:case"end":return e.stop()}}),e)})))()},methods:{Init:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.GetTrashListApi();case 2:case"end":return e.stop()}}),e)})))()},fetchtrashcan:function(){this.trashcan=this.trashcanList.trashcan},initMap:function(){this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:this.currentLocation.lat,lng:this.currentLocation.lng},zoom:18,maxZoom:20,minZoom:10,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,zoomControl:!1,styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]}]})},setMarker:function(){var t=this,e=new google.maps.DirectionsService,r=new google.maps.DirectionsRenderer({map:this.map,polylineOptions:{strokeColor:"purple"},suppressMarkers:!0});this.trashcan.forEach((function(c){var A=n(1301);A=c.General.tcapacity<50?n(1302):c.General.tcapacity<75?n(1332):c.General.tcapacity<=90?n(1301):c.General.tcapacity<=100?n(1333):n(1302);var marker=new google.maps.Marker({position:{lat:c.lat,lng:c.lng},map:t.map,icon:{url:A,scaledSize:new google.maps.Size(32,32)}});console.log(t.trashcan),marker.addListener("click",(function(){var n=new google.maps.InfoWindow({maxWidth:300,minWidth:180}),A={origin:new google.maps.LatLng(t.currentLocation.lat,t.currentLocation.lng),destination:new google.maps.LatLng(c.lat,c.lng),travelMode:google.maps.TravelMode.DRIVING};e.route(A,(function(e,A){if(A===google.maps.DirectionsStatus.OK){r.setMap(null),r.setMap(t.map),r.setDirections(e);var d=new o.default({render:function(t){return t(l.a,{props:{general:c.General,recycle:c.Recycle,lat:c.lat,lng:c.lng,tname:c.tname}})}});n.setContent(d.$mount().$el),n.open(t.map,marker),t.infowindow&&t.infowindow.close(),n.open(t.map,marker),t.infowindow=n}}))}))}))},getCurrentLocation:function(){var t=this;return new Promise((function(e,n){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(r){var c=new google.maps.Geocoder,o=new google.maps.LatLng(r.coords.latitude,r.coords.longitude);c.geocode({location:o},(function(c,o){"OK"===o&&c[0]?(t.isNoMap=!1,t.currentLocation={lat:r.coords.latitude,lng:r.coords.longitude},e()):(console.log("無法獲取當前位置"),t.isNoMap=!0,console.log("sdfjsl"),n())}))}),(function(e){console.log("獲取位置失敗：",e),t.isNoMap=!0,console.log("sdfjsl"),n()})):(console.log("瀏覽器不支援 Geolocation API"),t.isNoMap=!0,n())}))},GetTrashListApi:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.b)();case 2:n=e.sent,t.trashcanList=n;case 4:case"end":return e.stop()}}),e)})))()}}},d=(n(1474),n(28)),component=Object(d.a)(A,(function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"MapIndex"}},[e("div",{ref:"mapRef",staticClass:"google-map",attrs:{id:"map"}},[t.isNoMap?e("div",{staticClass:"img-mask"},[e("div",{staticClass:"img-text-big"},[t._v(t._s("沒有定位 沒有方向"))]),e("div",{staticClass:"img-text"},[t._v(t._s("*請開啟定位，並重整畫面*"))]),e("img",{attrs:{src:n(1331),alt:"logo"}})]):t._e()]),t.isNoMap?t._e():e("div",[t.loadingVisible?e("Loading"):t._e()],1)])}),[],!1,null,"ba6129b4",null);e.default=component.exports}}]);