(window.webpackJsonp=window.webpackJsonp||[]).push([[25,69,70],{1275:function(e,t,n){"use strict";var r=n(15),o=n(687).trim;r({target:"String",proto:!0,forced:n(1276)("trim")},{trim:function(){return o(this)}})},1276:function(e,t,n){var r=n(162).PROPER,o=n(17),c=n(688);e.exports=function(e){return o((function(){return!!c[e]()||"​᠎"!=="​᠎"[e]()||r&&c[e].name!==e}))}},1278:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var r=n(30),o=(n(129),n(24),n(34),n(35),function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(1),n.e(2)]).then(n.bind(null,1274));case 2:return r=e.sent.default,e.prev=3,e.next=6,r.post("https://large-lovely-woodcock.ngrok-free.app/sendotptext/?email=".concat(t));case 6:e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",{data:{message:"newEmail@gmail.com"}});case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()),c=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(1),n.e(2)]).then(n.bind(null,1274));case 2:return r=e.sent.default,e.prev=3,e.next=6,r.post("https://large-lovely-woodcock.ngrok-free.app/otptext/?otpid=".concat(t));case 6:e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return","12345");case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},1288:function(e,t,n){var content=n(1307);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(65).default)("618b8744",content,!0,{sourceMap:!1})},1306:function(e,t,n){"use strict";n(1288)},1307:function(e,t,n){var r=n(64)((function(i){return i[1]}));r.push([e.i,"#EditVerificationCode .block-area[data-v-2bdb3721]{background-color:rgba(0,0,0,.5);display:flex;flex-direction:column;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%;z-index:999}#EditVerificationCode .content[data-v-2bdb3721]{justify-content:center;text-align:center}#EditVerificationCode .content .form-area[data-v-2bdb3721]{display:flex;flex-direction:column;height:309px;justify-content:center}#EditVerificationCode .content .btn-area[data-v-2bdb3721]{background-color:#8dda1e;border-radius:14px;color:#fff;font-family:Inter;font-size:24px;font-weight:600;height:50px;letter-spacing:0;margin-top:12px;text-align:center;width:-webkit-fill-available}#EditVerificationCode .ant-row[data-v-2bdb3721]{margin:0!important}#EditVerificationCode .content[data-v-2bdb3721]{background:#000;border-radius:24px;margin:0 21px;padding:0 27px}#EditVerificationCode .verify-text[data-v-2bdb3721]{color:#fff;margin-top:18px;text-align:right}#EditVerificationCode .timeClock-text[data-v-2bdb3721]{color:#fff;font-size:18px;text-align:center}#EditVerificationCode .time-area[data-v-2bdb3721]{color:#fff;font-size:22px}#EditVerificationCode .input-font[data-v-2bdb3721]{border-radius:14px;font-size:20px;height:50px;padding:0 20px}@media (min-width:769px){#EditVerificationCode .block-area[data-v-2bdb3721]{align-items:center}#EditVerificationCode .content[data-v-2bdb3721]{width:600px}}",""]),r.locals={},e.exports=r},1394:function(e,t,n){"use strict";n.r(t);var r=n(30),o=(n(129),n(24),n(34),n(35),n(98),n(1275),n(325),n(163),n(161),n(1280)),c=n.n(o),l=n(1278),d={components:{DemoModal:function(){return n.e(5).then(n.bind(null,1542))},Loading:function(){return n.e(3).then(n.bind(null,1545))}},name:"EditVerificationCode",props:{visible:{type:Boolean,default:""},getOptId:{type:Number,default:""},getNewEmail:{type:String,default:""},memberEmail:{type:String,default:""}},data:function(){return{loadingVisible:!1,countdown:0,timer:null,tryAgain:null,isVisible:!1,otpText:"",memberForm:{verificationCode:""},rules:{verificationCode:[{required:!0,message:"不可為空"}]}}},mounted:function(){var e=this;c()(document).click((function(t){if(!0===e.visible){var n=c()(t.target),r=c()(".content"),o=c()(".block-area");n.closest(r).length||n.closest(o).length||console.log("jkjj")}}))},watch:{visible:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==e){t.next=3;break}return t.next=3,n.Init();case 3:case"end":return t.stop()}}),t)})))()}},methods:{Init:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.GetOtpTextApi(e.getOptId);case 2:e.startCountdown();case 3:case"end":return t.stop()}}),t)})))()},OnSubmit:function(){var e=this;this.memberForm.verificationCode===this.otpText?(this.loadingVisible=!0,this.$refs.ruleForm.validate(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return t.next=3,e.GetSendEmailApi();case 3:e.memberForm.verificationCode="",e.$emit("verifyDone",!0,e.getNewEmail),e.loadingVisible=!1;case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())):this.$message.error("驗證碼錯誤")},OpenModal:function(){this.isVisible=!0},CloseVerifyModal:function(){this.memberForm.verificationCode="",this.$emit("CloseVerifyModal")},SaveModal:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isVisible=!1,e.visible=!0,t.next=4,e.GetSendEmailApi();case 4:return console.log(e.otpId),t.next=7,e.GetOtpTextApi(e.otpId);case 7:console.log(e.otpText),e.$emit("ChangeVerify",e.otpText);case 9:case"end":return t.stop()}}),t)})))()},CloseModal:function(){this.isVisible=!1},GetCookieValue:function(e){for(var t=document.cookie.split(";"),i=0;i<t.length;i++){var n=t[i].trim();if(n.startsWith("".concat(e,"=")))return decodeURIComponent(n.substring(e.length+1))}return null},startCountdown:function(){var e=this;this.countdown=600,this.timer=setInterval((function(){e.countdown>0?e.countdown--:clearInterval(e.timer)}),1e3)},formatCountdownTime:function(){var e=Math.floor(this.countdown/60),t=this.countdown%60;return"".concat(e,":").concat(t<10?"0":"").concat(t)},GetOtpTextApi:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(l.a)(e);case 2:r=n.sent,t.otpText=r;case 4:case"end":return n.stop()}}),n)})))()},GetSendEmailApi:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.memberEmail),t.next=3,Object(l.b)(e.memberEmail);case 3:n=t.sent,console.log(n),e.otpId=n;case 6:case"end":return t.stop()}}),t)})))()}},beforeDestroy:function(){clearInterval(this.timer)}},f=d,m=(n(1306),n(28)),component=Object(m.a)(f,(function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"EditVerificationCode"}},[e.visible?t("div",{staticClass:"block-area"},[t("div",{staticClass:"content"},[t("aFormModel",{ref:"ruleForm",staticClass:"form-area",attrs:{model:e.memberForm,rules:e.rules}},[t("aFormModelItem",{ref:"verificationCode",attrs:{prop:"verificationCode"}},[t("aInput",{staticClass:"input-font",attrs:{placeholder:"請輸入郵件驗證碼"},model:{value:e.memberForm.verificationCode,callback:function(t){e.$set(e.memberForm,"verificationCode",t)},expression:"memberForm.verificationCode"}})],1),t("aFormModelItem",[t("aButton",{staticClass:"btn-area",attrs:{type:"primary"},on:{click:e.OnSubmit}},[e._v(e._s("送出"))])],1),t("div",{staticClass:"verify-text",on:{click:e.OpenModal}},[e._v(e._s("未收到驗證碼?"))]),t("div",{staticClass:"time-area"},[e._v(e._s(e.formatCountdownTime()))])],1)],1)]):e._e(),t("DemoModal",{attrs:{visible:e.isVisible},on:{CloseModal:e.CloseModal,SaveModal:e.SaveModal},scopedSlots:e._u([{key:"article",fn:function(){return[e._v(e._s("確定要重新寄送驗證碼?"))]},proxy:!0}])}),e.loadingVisible?t("Loading"):e._e()],1)}),[],!1,null,"2bdb3721",null);t.default=component.exports}}]);