(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1285:function(t,e,n){var content=n(1292);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(65).default)("5c33164c",content,!0,{sourceMap:!1})},1291:function(t,e,n){"use strict";n(1285)},1292:function(t,e,n){var o=n(64)((function(i){return i[1]}));o.push([t.i,"#GarbageModal .title[data-v-ba7985c6]{font-weight:800}#GarbageModal .trash-flex[data-v-ba7985c6]{display:flex;font-size:12px;font-weight:800;gap:14px;justify-content:center;margin-bottom:5px}#GarbageModal .trash-flex .trash-area[data-v-ba7985c6]{display:flex;flex-direction:column}#GarbageModal .trashIcon[data-v-ba7985c6]{font-size:25px}#GarbageModal .map-link[data-v-ba7985c6]{color:#1a73e8;padding-left:20px;text-align:center}",""]),o.locals={},t.exports=o},1309:function(t,e,n){"use strict";var o=n(45),c=(n(98),n(161),{name:"GarbageModal",props:{general:{type:Object,default:null},recycle:{type:Object,default:null},lat:{type:Number,default:null},lng:{type:Number,default:null},tname:{type:String,default:null}},data:function(){return{}},computed:{trashColor:function(){return function(t){return t<50?"#84ce19":t<75?"#ece200":t<=90?"#e70000":t<=100?"#a005d7":"#000000"}}},methods:{toGoogleMap:function(){console.log(Object(o.a)(this.lat),this.lng),window.open("https://www.google.com/maps/dir/?api=1&destination=".concat(this.lat,",").concat(this.lng),"_blank")}}}),r=(n(1291),n(28)),component=Object(r.a)(c,(function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"GarbageModal"}},[e("p",[t._v(t._s(t.tname))]),e("div",{staticClass:"trash-flex"},[e("div",{staticClass:"trash-area"},[e("p",[t._v(t._s("一般垃圾"))]),e("aIcon",{staticClass:"trashIcon",style:{color:t.trashColor(t.general.tcapacity)},attrs:{type:"delete",theme:"filled"}})],1),e("div",{staticClass:"trash-area"},[e("p",[t._v(t._s("回收垃圾"))]),e("aIcon",{staticClass:"trashIcon",style:{color:t.trashColor(t.recycle.tcapacity)},attrs:{type:"delete",theme:"filled"}})],1)]),e("a",{staticClass:"map-link",on:{click:t.toGoogleMap}},[t._v(t._s("在Google 地圖上查看"))])])}),[],!1,null,"ba7985c6",null);e.a=component.exports},1349:function(t,e,n){var content=n(1417);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(65).default)("c6d3ec66",content,!0,{sourceMap:!1})},1414:function(t,e,n){t.exports=n.p+"img/trash-can.92881cf.png"},1415:function(t){t.exports=JSON.parse('{"trashcan":[{"tname":"國立台中科技大學","tplace":"台中市北區三民路三段129號","lat":24.14930237613381,"lng":120.68014092604973,"General":{"qrcode":"QR-890123","tid":7,"id":1,"tcapacity":55},"Recycle":{"qrcode":"QR-890333","tid":17,"id":12,"tcapacity":100}},{"tname":"國立台中科技大學","tplace":"台中市北區三民路三段129號","lat":24.149617770896455,"lng":120.67964605963533,"General":{"qrcode":"QR-890123","tid":7,"id":1,"tcapacity":25},"Recycle":{"qrcode":"QR-890333","tid":17,"id":12,"tcapacity":80}},{"tname":"國立台中科技大學","tplace":"台中市北區三民路三段129號","lat":24.149847716812694,"lng":120.68113142022419,"General":{"qrcode":"QR-890123","tid":7,"id":1,"tcapacity":45},"Recycle":{"qrcode":"QR-890333","tid":17,"id":12,"tcapacity":91}},{"tname":"國立台中科技大學","tplace":"台中市北區三民路三段129號","lat":24.1491385955883,"lng":120.68108763835511,"General":{"qrcode":"QR-890123","tid":7,"id":1,"tcapacity":75},"Recycle":{"qrcode":"QR-890333","tid":17,"id":12,"tcapacity":1}}]}')},1416:function(t,e,n){"use strict";n(1349)},1417:function(t,e,n){var o=n(64)((function(i){return i[1]}));o.push([t.i,".google-map[data-v-6fc596b3]{height:95vh;width:100%}",""]),o.locals={},t.exports=o},1514:function(t,e,n){"use strict";n.r(e);var o=n(30),c=(n(129),n(24),n(34),n(35),n(46),n(88),n(9)),r=(n(1414),n(1309)),map=n(1415),l={name:"DemoMap",components:{GarbageModal:function(){return n.e(8).then(n.bind(null,1536))}},data:function(){return{visible:!1,map:null,currentLocation:{lat:null,lng:null},trashcan:[]}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCurrentLocation();case 2:t.initMap(),t.fetchtrashcan(),t.setMarker();case 5:case"end":return e.stop()}}),e)})))()},methods:{fetchtrashcan:function(){this.trashcan=map.trashcan,this.currentLocation.lat=map.center.lat,this.currentLocation.lng=map.center.lng},initMap:function(){this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:this.currentLocation.lat,lng:this.currentLocation.lng},zoom:15,maxZoom:20,minZoom:3,streetViewControl:!1,mapTypeControl:!1})},setMarker:function(){var t=this;this.trashcan.forEach((function(e){console.log(e.General);var marker=new google.maps.Marker({position:{lat:e.lat,lng:e.lng},map:t.map});marker.addListener("click",(function(){var n=new google.maps.InfoWindow({maxWidth:200}),o=new c.default({render:function(t){return t(r.a,{props:{general:e.General,recycle:e.Recycle}})}});n.setContent(o.$mount().$el),n.open(t.map,marker)}))}))},getCurrentLocation:function(){var t=this;return new Promise((function(e,n){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(o){var c=new google.maps.Geocoder,r=new google.maps.LatLng(o.coords.latitude,o.coords.longitude);c.geocode({location:r},(function(c,r){"OK"===r&&c[0]?(t.currentLocation={lat:o.coords.latitude,lng:o.coords.longitude},e()):(console.log("無法獲取當前位置"),n())}))}),(function(t){console.log("獲取位置失敗：",t),n()})):(console.log("瀏覽器不支援 Geolocation API"),n())}))}}},d=(n(1416),n(28)),component=Object(d.a)(l,(function(){this._self._c;return this._m(0)}),[function(){var t=this._self._c;return t("div",{attrs:{id:"DemoMap"}},[t("div",{staticClass:"container mt-4"},[t("div",{staticClass:"map-container border rounded"},[t("ul",{staticClass:"nav justify-content-center border-bottom"}),t("div",{staticClass:"google-map",attrs:{id:"map"}})])])])}],!1,null,"6fc596b3",null);e.default=component.exports}}]);